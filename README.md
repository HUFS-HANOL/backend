# ê°ì • ìº˜ë¦°ë” API ëª…ì„¸ì„œ

ê°ì • ê¸°ë¡ ë° AI ì‹œ ì¢‹ì•„ìš” ê¸°ëŠ¥ì´ ìˆëŠ” ê°ì • ìº˜ë¦°ë” APIì…ë‹ˆë‹¤. ì´ ë¬¸ì„œëŠ” API ìš”ì²­ ë°©ì‹ê³¼ ì‘ë‹µ ì˜ˆì‹œë¥¼ ì •ë¦¬í•œ ëª…ì„¸ì„œì…ë‹ˆë‹¤.

---

## ğŸ” ì¸ì¦ ì •ë³´

- ëª¨ë“  APIëŠ” ì¸ì¦ëœ ì‚¬ìš©ìë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤.
- JWT í† í°ì„ ì‚¬ìš©í•˜ë©°, í† í°ì€ `Authorization` í—¤ë”ì— `Bearer <token>` í˜•íƒœë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.

---
ìˆ˜ì •ì‚¬í•­ 06/ 09
- ê°ì •,ì¼ê¸°ê°€ ì €ì¥ëœ ì‹œê°(created_at) ê¸°ì¤€ì´ ì•„ë‹Œ,
+ ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ ì¼ê¸°ë¥¼ ì‘ì„±í•œ ë‚ ì§œ(date)ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í†µê³„ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

## ğŸ“† ì›”ë³„ ìº˜ë¦°ë” ì¡°íšŒ API

### `GET /calendar/emotion`

#### ìš”ì²­

- **Query Parameters:**
  - `userId` (í•„ìˆ˜): ì‚¬ìš©ì ID
  - `month` (í•„ìˆ˜): ì¡°íšŒí•  ì›” (í˜•ì‹: `YYYY-MM`)

#### ì‘ë‹µ ì˜ˆì‹œ

```json
[
  {
    "date": "2025-04-01",
    "emotion": "í–‰ë³µ",
    "liked": true,
    "hasPoem": true
  }
]
```

---

## ğŸ—“ï¸ íŠ¹ì • ë‚ ì§œ ì¼ê¸°/ì‹œ ìƒì„¸ ì¡°íšŒ API

### `GET /calendar/detail`

#### ìš”ì²­

- **Query Parameters:**
  - `userId`: ì‚¬ìš©ì ID
  - `date`: ë‚ ì§œ (í˜•ì‹: `YYYY-MM-DD`)

#### ì‘ë‹µ ì˜ˆì‹œ

```json
{
  "date": "2025-05-31",
  "diary": {
    "title": "ì˜¤ëŠ˜ì˜ ì¼ê¸° ì œëª©",
    "content": "ì˜¤ëŠ˜ì€ ê¸°ë¶„ì´ ì¢‹ì•˜ë‹¤.",
    "created_at": "2025-05-31T10:00:00Z"
  },
  "emotion": {
    "type": "í–‰ë³µ"
  },
  "poem": {
    "text": "í–‡ì‚´ì´ ë¹„ì¶”ëŠ” ì•„ì¹¨,\në§ˆìŒì´ ë”°ëœ»í•´ì§„ë‹¤.",
    "created_at": "2025-05-31T10:10:00Z"
  }
}
```

---

## ğŸ’¬ ê°ì • ìƒíƒœ ì €ì¥ API

### `POST /calendar/emotion`

#### ìš”ì²­

```json
{
  "userId": "123",
  "date": "2025-04-10",
  "emotion": "í”¼ê³¤í•¨"
}
```

#### ì‘ë‹µ

```json
{
  "message": "ê°ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤."
}
```

---

## â¤ï¸ ì‹œ ì¢‹ì•„ìš”/ì·¨ì†Œ API

### `POST /calendar/poem/like`

#### ìš”ì²­

```json
{
  "poemId": 1,
  "liked": true
}
```

- `liked: true` â¡ï¸ ì¢‹ì•„ìš”
- `liked: false` â¡ï¸ ì¢‹ì•„ìš” ì·¨ì†Œ

#### ì‘ë‹µ

```json
{
  "message": "ì¢‹ì•„ìš”ê°€ ë°˜ì˜ë˜ì—ˆìŠµë‹ˆë‹¤."
}
```

---

## ğŸ“Š ê°ì • í†µê³„ API (ê¸°ì¡´ êµ¬ì¡°)

### `GET /calendar/emotions/stats`

#### ìš”ì²­

- **Query Parameters:**
  - `userId` (í•„ìˆ˜): ì‚¬ìš©ì ID
  - `month` (í•„ìˆ˜): ì¡°íšŒí•  ì›” (í˜•ì‹: `YYYY-MM`)

#### ì‘ë‹µ ì˜ˆì‹œ

```json
{
  "í–‰ë³µ": 5,
  "í”¼ê³¤í•¨": 3,
  "ìŠ¬í””": 2
}
```

---

## ğŸ“ˆ í†µí•© ê°ì • í†µê³„ API

### `GET /statistics/summary`

#### ì„¤ëª…  
ì‚¬ìš©ìì˜ ì „ì²´ ê°ì • ì¤‘ ê°€ì¥ ë§ì´ ì‚¬ìš©ëœ ê°ì •ì„ ì¡°íšŒí•©ë‹ˆë‹¤.

#### ì‘ë‹µ ì˜ˆì‹œ

```json
{
  "mostUsedEmotion": {
    "name": "í–‰ë³µ",
    "count": 12
  }
}
```

---

### `GET /statistics/monthly`

#### ì„¤ëª…  
í•´ë‹¹ ì›”ì— ì‚¬ìš©ëœ ê°ì •ë“¤ì˜ í†µê³„(ê°œìˆ˜ ë° ë¹„ìœ¨)ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

#### ì‘ë‹µ ì˜ˆì‹œ

```json
{
  "year": 2025,
  "month": 4,
  "emotions": [
    {
      "name": "í–‰ë³µ",
      "count": 5,
      "percentage": 50
    },
    {
      "name": "í”¼ê³¤í•¨",
      "count": 3,
      "percentage": 30
    },
    {
      "name": "ìŠ¬í””",
      "count": 2,
      "percentage": 20
    }
  ]
}
```

---

### `GET /statistics/count`

#### ì„¤ëª…  
ì „ì²´ ê°ì • ê¸°ë¡ì—ì„œ ê°ì •ë³„ ëˆ„ì  íšŸìˆ˜ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

#### ì‘ë‹µ ì˜ˆì‹œ

```json
{
  "emotions": [
    {
      "name": "í–‰ë³µ",
      "count": 20
    },
    {
      "name": "í”¼ê³¤í•¨",
      "count": 10
    },
    {
      "name": "ë¶ˆì•ˆ",
      "count": 7
    }
  ]
}
```

---

### `GET /statistics/yearly-happiness`

#### ì„¤ëª…  
ì „ì²´ ê°ì •ì¤‘ í–‰ë³µë„ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.

#### ì‘ë‹µ ì˜ˆì‹œ

```json
{
    "year": 2025,
    "emotions": [
        "ê¸°ì¨",
        "í–‰ë³µí•¨",
        "ì¦ê±°ì›€"
    ],
    "monthlyCounts": [
        {
            "month": 1,
            "count": 0
        },
        {
            "month": 2,
            "count": 0
        },
        {
            "month": 3,
            "count": 0
        },
        {
            "month": 4,
            "count": 0
        },
        {
            "month": 5,
            "count": 12
        },
        {
            "month": 6,
            "count": 7
        },
        {
            "month": 7,
            "count": 0
        },
        {
            "month": 8,
            "count": 0
        },
        {
            "month": 9,
            "count": 0
        },
        {
            "month": 10,
            "count": 0
        },
        {
            "month": 11,
            "count": 0
        },
        {
            "month": 12,
            "count": 0
        }
    ]
}
```

---

## ğŸ“ ì°¸ê³  ì‚¬í•­

- ë‚ ì§œ í˜•ì‹ì€ `YYYY-MM-DD` ë˜ëŠ” `YYYY-MM`ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
- JWT ì¸ì¦ í† í°ì„ `Authorization: Bearer <token>` í˜•íƒœë¡œ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.
- ëª¨ë“  APIëŠ” ì¸ì¦ëœ ì‚¬ìš©ì(userId)ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤.
